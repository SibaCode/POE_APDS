{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import Navbar from'../../components/Navbar';import Notification from'./../../Notification';import{useAuth}from'../../../src/AuthContext';import'./../customer/css/DashboardPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const apiBaseUrl='https://sibapayment-cubwerbvhzfpbmg8.southafricanorth-01.azurewebsites.net/api/TransactionDetails';const DashboardPage=()=>{const{user}=useAuth();const[form,setForm]=useState({id:0,amount:'',currency:'',swiftCode:'',status:'',date:new Date().toISOString()});const[isModalOpen,setIsModalOpen]=useState(false);const[success,setSuccess]=useState('');const[error,setError]=useState('');const[transactions,setTransactions]=useState([]);// Declare transactions state\nconst handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{const payload={...form,accountNumber:user.accountNumber,status:'Pending',date:new Date().toISOString()};await axios.post(apiBaseUrl,payload);setSuccess('Transaction created successfully');console.log('User details:',user.accountNumber);resetForm();}catch(err){console.error(err);setError('Transaction failed');}};const toggleModal=()=>{setIsModalOpen(!isModalOpen);setForm({id:0,amount:'',currency:'',swiftCode:'',status:'Pending',date:new Date().toISOString()});};const resetForm=()=>{setForm({id:0,amount:'',currency:'',swiftCode:'',status:'Pending',date:new Date().toISOString()});setIsModalOpen(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{userType:\"Customer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Customer Dashboard\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Welcome, \",user===null||user===void 0?void 0:user.fullName]}),success&&/*#__PURE__*/_jsx(Notification,{message:success,type:\"success\"}),error&&/*#__PURE__*/_jsx(Notification,{message:error,type:\"error\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Transaction History\"}),/*#__PURE__*/_jsx(\"button\",{className:\"verify-btn\",onClick:toggleModal,children:\"Add New Transaction\"}),transactions.length===0&&!error?/*#__PURE__*/_jsx(\"p\",{children:\"You have no transactions yet.\"}):/*#__PURE__*/_jsxs(\"table\",{border:\"1\",width:\"100%\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Currency\"}),/*#__PURE__*/_jsx(\"th\",{children:\"SWIFT Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map(tx=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:tx.id}),/*#__PURE__*/_jsx(\"td\",{children:tx.amount}),/*#__PURE__*/_jsx(\"td\",{children:tx.currency}),/*#__PURE__*/_jsx(\"td\",{children:tx.swiftCode}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`status-pill ${tx.status.toLowerCase()}`,children:tx.status==='Verified'?'Verified':'Pending'})})]},tx.id))})]}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:'New Transaction'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",value:form.amount,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Currency:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"currency\",value:form.currency,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select currency\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GBP\",children:\"GBP\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ZAR\",children:\"ZAR\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"SWIFT Code:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"swiftCode\",value:form.swiftCode,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:toggleModal,children:\"Close\"})]})]})})]})]});};export default DashboardPage;","map":{"version":3,"names":["React","useState","axios","Navbar","Notification","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","apiBaseUrl","DashboardPage","user","form","setForm","id","amount","currency","swiftCode","status","date","Date","toISOString","isModalOpen","setIsModalOpen","success","setSuccess","error","setError","transactions","setTransactions","handleChange","e","target","name","value","handleSubmit","preventDefault","payload","accountNumber","post","console","log","resetForm","err","toggleModal","children","userType","className","fullName","message","type","onClick","length","border","width","map","tx","toLowerCase","onSubmit","onChange","required"],"sources":["/home/sibahle/Videos/POE_APDS/frontend/src/components/customer/DashboardPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport Navbar from '../../components/Navbar';\nimport Notification from './../../Notification';\nimport { useAuth } from '../../../src/AuthContext';\nimport './../customer/css/DashboardPage.css';\n\nconst apiBaseUrl = 'https://sibapayment-cubwerbvhzfpbmg8.southafricanorth-01.azurewebsites.net/api/TransactionDetails';\n\nconst DashboardPage = () => {\n  const { user } = useAuth();\n\n  const [form, setForm] = useState({\n    id: 0,\n    amount: '',\n    currency: '',\n    swiftCode: '',\n    status: '',\n    date: new Date().toISOString(),\n    \n  });\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [success, setSuccess] = useState('');\n  const [error, setError] = useState('');\n  const [transactions, setTransactions] = useState([]); // Declare transactions state\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const payload = {\n        ...form,\n        accountNumber: user.accountNumber,\n        status: 'Pending',\n        date: new Date().toISOString(),\n      };\n      await axios.post(apiBaseUrl, payload);\n      setSuccess('Transaction created successfully');\n      console.log('User details:', user.accountNumber);\n      resetForm();\n    } catch (err) {\n      console.error(err);\n      setError('Transaction failed');\n    }\n  };\n  \n  const toggleModal = () => {\n    setIsModalOpen(!isModalOpen);\n    setForm({\n      id: 0,\n      amount: '',\n      currency: '',\n      swiftCode: '',\n      status: 'Pending',\n      date: new Date().toISOString(),\n    });\n  };\n\n  const resetForm = () => {\n    setForm({\n      id: 0,\n      amount: '',\n      currency: '',\n      swiftCode: '',\n      status: 'Pending',\n      date: new Date().toISOString(),\n    });\n    setIsModalOpen(false);\n  };\n\n  return (\n    <>\n      <Navbar userType=\"Customer\" />\n      <div className=\"dashboard-container\">\n        <h2>Customer Dashboard</h2>\n        <h3>Welcome, {user?.fullName}</h3>\n        {success && <Notification message={success} type=\"success\" />}\n        {error && <Notification message={error} type=\"error\" />}\n        <h3>Transaction History</h3>\n<button className=\"verify-btn\" onClick={toggleModal}>Add New Transaction</button>\n\n{transactions.length === 0 && !error ? (\n  <p>You have no transactions yet.</p>\n) : (\n  <table border=\"1\" width=\"100%\">\n    <thead>\n      <tr>\n        <th>ID</th>\n        <th>Amount</th>\n        <th>Currency</th>\n        <th>SWIFT Code</th>\n        <th>Status</th>\n      </tr>\n    </thead>\n    <tbody>\n      {transactions.map((tx) => (\n        <tr key={tx.id}>\n          <td>{tx.id}</td>\n          <td>{tx.amount}</td>\n          <td>{tx.currency}</td>\n          <td>{tx.swiftCode}</td>\n          <td>\n            <span className={`status-pill ${tx.status.toLowerCase()}`}>\n              {tx.status === 'Verified' ? 'Verified' : 'Pending'}\n            </span>\n          </td>\n        </tr>\n      ))}\n    </tbody>\n  </table>\n)}\n\n\n        {isModalOpen && (\n          <div className=\"modal\">\n            <div className=\"modal-content\">\n              <h3>{'New Transaction'}</h3>\n              <form onSubmit={handleSubmit}>\n                <div>\n                  <label>Amount:</label>\n                  <input type=\"number\" name=\"amount\" value={form.amount} onChange={handleChange} required />\n                </div>\n                <div>\n                  <label>Currency:</label>\n                  <select name=\"currency\" value={form.currency} onChange={handleChange} required>\n                    <option value=\"\">Select currency</option>\n                    <option value=\"USD\">USD</option>\n                    <option value=\"EUR\">EUR</option>\n                    <option value=\"GBP\">GBP</option>\n                    <option value=\"ZAR\">ZAR</option>\n                  </select>\n                </div>\n                <div>\n                  <label>SWIFT Code:</label>\n                  <input type=\"text\" name=\"swiftCode\" value={form.swiftCode} onChange={handleChange} required />\n                </div>\n                <button type=\"submit\">Create</button>\n                <button type=\"button\" onClick={toggleModal}>Close</button>\n              </form>\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default DashboardPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}