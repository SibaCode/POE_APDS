{"ast":null,"code":"import{Routes,Route,Navigate}from'react-router-dom';import{useEffect,useRef}from'react';import DashboardPage from'./components/customer/DashboardPage';import RegisterPage from'./components/customer/RegisterPage';import LoginPage from'./components/customer/LoginPage';import EmployeeLoginPage from'./components/employee/EmployeeLoginPage';import EmployeeDashboardPage from'./components/employee/EmployeeDashboardPage';import{AuthProvider}from'./AuthContext.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// Use ref to hold WebSocket instance\nconst socketRef=useRef(null);useEffect(()=>{// Create WebSocket connection\nconst socket=new WebSocket(`${window.location.origin.replace(/^http/,'ws')}/ws`);socketRef.current=socket;// WebSocket event listeners\nsocket.onopen=()=>{console.log('WebSocket connection opened');};socket.onmessage=event=>{console.log('Message from server:',event.data);};socket.onerror=error=>{console.error('WebSocket error:',error);};socket.onclose=()=>{console.log('WebSocket connection closed');};// Cleanup on unmount\nreturn()=>{if(socket.readyState===WebSocket.OPEN){socket.close();}};},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegisterPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(DashboardPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/employee\",element:/*#__PURE__*/_jsx(EmployeeLoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/employee-dashboard\",element:/*#__PURE__*/_jsx(EmployeeDashboardPage,{})})]})})});}export default App;","map":{"version":3,"names":["Routes","Route","Navigate","useEffect","useRef","DashboardPage","RegisterPage","LoginPage","EmployeeLoginPage","EmployeeDashboardPage","AuthProvider","jsx","_jsx","jsxs","_jsxs","App","socketRef","socket","WebSocket","window","location","origin","replace","current","onopen","console","log","onmessage","event","data","onerror","error","onclose","readyState","OPEN","close","className","children","path","element","to"],"sources":["/home/sibahle/Videos/POE_APDS/frontend/src/App.js"],"sourcesContent":["import { Routes, Route, Navigate } from 'react-router-dom';\nimport { useEffect, useRef } from 'react';\nimport DashboardPage from './components/customer/DashboardPage';\nimport RegisterPage from './components/customer/RegisterPage';\nimport LoginPage from './components/customer/LoginPage';\nimport EmployeeLoginPage from './components/employee/EmployeeLoginPage';\nimport EmployeeDashboardPage from './components/employee/EmployeeDashboardPage'; \n\nimport { AuthProvider } from './AuthContext.js';\n\nfunction App() {\n  // Use ref to hold WebSocket instance\n  const socketRef = useRef(null);\n\n  useEffect(() => {\n    // Create WebSocket connection\n    const socket = new WebSocket(`${window.location.origin.replace(/^http/, 'ws')}/ws`);\n    socketRef.current = socket;\n\n    // WebSocket event listeners\n    socket.onopen = () => {\n      console.log('WebSocket connection opened');\n    };\n\n    socket.onmessage = (event) => {\n      console.log('Message from server:', event.data);\n    };\n\n    socket.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n\n    socket.onclose = () => {\n      console.log('WebSocket connection closed');\n    };\n\n    // Cleanup on unmount\n    return () => {\n      if (socket.readyState === WebSocket.OPEN) {\n        socket.close();\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <AuthProvider>\n        <Routes>\n          <Route path=\"/\" element={<Navigate to=\"/login\" />} />\n          <Route path=\"/login\" element={<LoginPage />} />\n          <Route path=\"/register\" element={<RegisterPage />} />\n          <Route path=\"/dashboard\" element={<DashboardPage />} />\n          <Route path=\"/employee\" element={<EmployeeLoginPage />} />\n          <Route path=\"/employee-dashboard\" element={<EmployeeDashboardPage />} />\n        </Routes>\n      </AuthProvider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,OAASA,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CAC1D,OAASC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,MAAO,CAAAC,aAAa,KAAM,qCAAqC,CAC/D,MAAO,CAAAC,YAAY,KAAM,oCAAoC,CAC7D,MAAO,CAAAC,SAAS,KAAM,iCAAiC,CACvD,MAAO,CAAAC,iBAAiB,KAAM,yCAAyC,CACvE,MAAO,CAAAC,qBAAqB,KAAM,6CAA6C,CAE/E,OAASC,YAAY,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb;AACA,KAAM,CAAAC,SAAS,CAAGZ,MAAM,CAAC,IAAI,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAc,MAAM,CAAG,GAAI,CAAAC,SAAS,CAAC,GAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACC,OAAO,CAAC,OAAO,CAAE,IAAI,CAAC,KAAK,CAAC,CACnFN,SAAS,CAACO,OAAO,CAAGN,MAAM,CAE1B;AACAA,MAAM,CAACO,MAAM,CAAG,IAAM,CACpBC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC5C,CAAC,CAEDT,MAAM,CAACU,SAAS,CAAIC,KAAK,EAAK,CAC5BH,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEE,KAAK,CAACC,IAAI,CAAC,CACjD,CAAC,CAEDZ,MAAM,CAACa,OAAO,CAAIC,KAAK,EAAK,CAC1BN,OAAO,CAACM,KAAK,CAAC,kBAAkB,CAAEA,KAAK,CAAC,CAC1C,CAAC,CAEDd,MAAM,CAACe,OAAO,CAAG,IAAM,CACrBP,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC5C,CAAC,CAED;AACA,MAAO,IAAM,CACX,GAAIT,MAAM,CAACgB,UAAU,GAAKf,SAAS,CAACgB,IAAI,CAAE,CACxCjB,MAAM,CAACkB,KAAK,CAAC,CAAC,CAChB,CACF,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEvB,IAAA,QAAKwB,SAAS,CAAC,KAAK,CAAAC,QAAA,cAClBzB,IAAA,CAACF,YAAY,EAAA2B,QAAA,cACXvB,KAAA,CAACd,MAAM,EAAAqC,QAAA,eACLzB,IAAA,CAACX,KAAK,EAACqC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAE3B,IAAA,CAACV,QAAQ,EAACsC,EAAE,CAAC,QAAQ,CAAE,CAAE,CAAE,CAAC,cACrD5B,IAAA,CAACX,KAAK,EAACqC,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAE3B,IAAA,CAACL,SAAS,GAAE,CAAE,CAAE,CAAC,cAC/CK,IAAA,CAACX,KAAK,EAACqC,IAAI,CAAC,WAAW,CAACC,OAAO,cAAE3B,IAAA,CAACN,YAAY,GAAE,CAAE,CAAE,CAAC,cACrDM,IAAA,CAACX,KAAK,EAACqC,IAAI,CAAC,YAAY,CAACC,OAAO,cAAE3B,IAAA,CAACP,aAAa,GAAE,CAAE,CAAE,CAAC,cACvDO,IAAA,CAACX,KAAK,EAACqC,IAAI,CAAC,WAAW,CAACC,OAAO,cAAE3B,IAAA,CAACJ,iBAAiB,GAAE,CAAE,CAAE,CAAC,cAC1DI,IAAA,CAACX,KAAK,EAACqC,IAAI,CAAC,qBAAqB,CAACC,OAAO,cAAE3B,IAAA,CAACH,qBAAqB,GAAE,CAAE,CAAE,CAAC,EAClE,CAAC,CACG,CAAC,CACZ,CAAC,CAEV,CAEA,cAAe,CAAAM,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}